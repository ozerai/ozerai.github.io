<!DOCTYPE html>
<html lang="id">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>OzerAI Property Agents Chatbot</title>
Â  Â  <meta name="description content="OzerAi AI property agent provides 24/7, multilingual, and accurate listing-data-based responses for property leads. A Gemini-powered real estate chatbot solution.">
<meta name="keywords" content="property chatbot, AI real estate agent, OzerAi, multilingual chatbot, Gemini property, property lead generation, 24/7 chatbot solution, listing data-based property AI chatbot, Gemini chatbot example">
Â  Â  <style>
Â  Â  Â  Â  /* CSS Anda tidak saya ubah, sudah rapi */
Â  Â  Â  Â  .chat-messages::-webkit-scrollbar { width: 8px; }
Â  Â  Â  Â  .chat-messages::-webkit-scrollbar-thumb { background-color: rgba(200, 200, 200, 0.5); border-radius: 4px; }
Â  Â  Â  Â  .chat-messages { scrollbar-width: thin; scrollbar-color: rgba(200, 200, 200, 0.5) transparent; }

Â  Â  Â  Â  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: white; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
Â  Â  Â  Â  .chat-container { width: 100%; max-width: 800px; height: 100vh; background-color: white; display: flex; flex-direction: column; overflow: hidden; box-shadow: none; border: none; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .chat-header {Â 
Â  Â  Â  Â  Â  Â  padding: 20px 0;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #f0f0f0;Â 
Â  Â  Â  Â  Â  Â  background-color: #ffffff;
Â  Â  Â  Â  Â  Â  position: sticky;Â 
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  z-index: 20;
Â  Â  Â  Â  Â  Â  font-size: 1.5em;Â 
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }

Â  Â  Â  Â  .chat-messages { flex-grow: 1; overflow-y: auto; padding: 20px 20px 0 20px; border: none; box-shadow: none; width: 100%; }
Â  Â  Â  Â  .message { display: flex; justify-content: flex-start; margin-bottom: 15px; padding: 0; background-color: transparent; }
Â  Â  Â  Â  .message-bubble { max-width: 70%; width: fit-content; color: #333; line-height: 1.6; border-radius: 18px; padding: 10px 15px; word-wrap: break-word; word-break: break-word; }

Â  Â  Â  Â  .message-bubble img {Â 
Â  Â  Â  Â  Â  Â  max-width: 100%;Â 
Â  Â  Â  Â  Â  Â  height: auto;Â 
Â  Â  Â  Â  Â  Â  border-radius: 8px;Â 
Â  Â  Â  Â  Â  Â  margin-top: 10px;Â 
Â  Â  Â  Â  Â  Â  display: block;Â 
Â  Â  Â  Â  Â  Â  margin-left: auto;
Â  Â  Â  Â  Â  Â  margin-right: auto;Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  .message-adam .message-bubble { background-color: white; border: 1px solid #e0e0e0; }
Â  Â  Â  Â  .message-user .message-bubble { background-color: #e6f3ff; color: #1a1a1a; border: none; }

Â  Â  Â  Â  .message-bubble strong { font-weight: 600; color: #1a1a1a; }
Â  Â  Â  Â  .message-bubble ul, .message-bubble ol { padding-left: 20px; margin-top: 5px; margin-bottom: 5px; }
Â  Â  Â  Â  .message-bubble p { margin: 0; }
Â  Â  Â  Â  .message-bubble a { color: #10a37f; text-decoration: none; }
Â  Â  Â  Â  .initial-message { text-align: center; color: #333; padding: 50px 0; font-size: 2em; font-weight: 300; margin-top: 50px; }

Â  Â  Â  Â  .chat-input-area { position: relative; z-index: 10; box-shadow: 0 -10px 10px -5px rgba(255, 255, 255, 1); padding: 10px 20px 30px 20px; background-color: white; display: flex; justify-content: center; }
Â  Â  Â  Â  .chat-input { width: 100%; max-width: 600px; position: relative; border: 1px solid #e0e0e0; border-radius: 25px; display: flex; align-items: center; }
Â  Â  Â  Â  .chat-input input { flex-grow: 1; border: none; padding: 15px 15px 15px 20px; font-size: 16px; outline: none; background-color: transparent; font-family: inherit; }
Â  Â  Â  Â  .chat-input button { width: 38px; height: 38px; margin-right: 8px; background-color: #10a37f; color: white; border: none; border-radius: 50%; cursor: pointer; font-size: 18px; line-height: 1; display: flex; align-items: center; justify-content: center; }
Â  Â  </style>
</head>
<body>
Â  Â Â 
Â  Â  <script>
Â  Â  Â  Â  function marked(str) {
Â  Â  Â  Â  Â  Â  str = str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  str = str.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank">$1</a>');Â 
Â  Â  Â  Â  Â  Â  str = str.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');Â 
Â  Â  Â  Â  Â  Â  str = str.replace(/\*(.*?)\*/g, '<em>$1</em>');Â 
Â  Â  Â  Â  Â  Â  str = str.replace(/\n/g, '<br>');Â 
Â  Â  Â  Â  Â  Â  str = str.replace(/(<br>)*\s*(\*|\-)\s/g, '<br>&#x2022; ');Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // KODE PERBAIKAN: Regex baru yang menangkap NAMA FILE setelah 'Gambar:' dan mengabaikan path lama yang kompleks.
            // Output Adam saat ini adalah "Gambar: Christopher-Street.png"
Â  Â  Â  Â  Â  Â  str = str.replace(/Gambar:\s*([^<]+?\.(png|jpg|jpeg|gif|webp))/g, '<br><img src="/static/$1" alt="Gambar Properti" loading="lazy"><br>');

Â  Â  Â  Â  Â  Â  return str.trim();
Â  Â  Â  Â  }
Â  Â  </script>
Â  Â Â 
Â  Â  <div class="chat-container">
Â  Â  Â  Â  <div class="chat-messages" id="chat-messages">
Â  Â  Â  Â  Â  Â  <div class="initial-message">
Â  Â  Â  Â  Â  Â  Â  Â  What's on the agenda today?
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="chat-input-area">
Â  Â  Â  Â  Â  Â  <div class="chat-input">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="user-input" placeholder="Ask anything...">Â 
Â  Â  Â  Â  Â  Â  Â  Â  <button id="send-button">âž¤</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
<footer style="
Â  Â  text-align: center;Â 
Â  Â  padding: 4px 0;Â 
Â  Â  margin-top: 2px;
Â  Â  border-top: 1px solid #eee;
Â  Â  font-size: 0.85em;
Â  Â  color: #888;">

Â  Â  <p>&copy; <span id="currentYear"></span> <a href="https://ozerai.vercel.app" style="color:#888;underline:none;">OzerAi Chatbot</a> created by SKMA UP 1 92 | Powered by Google Geminiâš¡@Vercel. All rights reserved.</p>
</footer>
Â  Â  </div>

<script>
Â  Â  // FUNGSI JAVASCRIPT UNTUK MENGAMBIL TAHUN SAAT INI
Â  Â  document.getElementById('currentYear').textContent = new Date().getFullYear();

Â  Â  const chatMessages = document.getElementById('chat-messages');
Â  Â  const userInput = document.getElementById('user-input');
Â  Â  const sendButton = document.getElementById('send-button');

Â  Â  function addMessage(sender, text) {
Â  Â  Â  Â  const messageElement = document.createElement('div');
Â  Â  Â  Â  messageElement.classList.add('message', sender === 'user' ? 'message-user' : 'message-adam');
Â  Â  Â  Â Â 
Â  Â  Â  Â  const bubbleElement = document.createElement('div');
Â  Â  Â  Â  bubbleElement.classList.add('message-bubble');
Â  Â  Â  Â Â 
Â  Â  Â  Â  bubbleElement.innerHTML = marked(text);

Â  Â  Â  Â  messageElement.appendChild(bubbleElement);
Â  Â  Â  Â  chatMessages.appendChild(messageElement);
Â  Â  Â  Â Â 
Â  Â  Â  Â  chatMessages.scrollTop = chatMessages.scrollHeight;
Â  Â  }

Â  Â  async function sendMessage() {
Â  Â  Â  Â  const message = userInput.value.trim();
Â  Â  Â  Â  if (!message) return;

Â  Â  Â  Â  const initialMessage = document.querySelector('.initial-message');
Â  Â  Â  Â  if (initialMessage) initialMessage.remove();

Â  Â  Â  Â  addMessage('user', message);
Â  Â  Â  Â  userInput.value = '';
Â  Â  Â  Â  sendButton.disabled = true;Â 
Â  Â  Â  Â  sendButton.innerHTML = '<span style="font-size: 14px;">...</span>';Â 

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch('/chat', {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ message: message })
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  addMessage('adam', data.response);

Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error('Error:', error);
Â  Â  Â  Â  Â  Â  addMessage('adam', 'Waduh, koneksi ke server Adam lagi putus nih. Coba cek lagi ya! ðŸ¥²');
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  sendButton.disabled = false;
Â  Â  Â  Â  Â  Â  sendButton.textContent = 'âž¤';Â 
Â  Â  Â  Â  }
Â  Â  }

Â  Â  sendButton.addEventListener('click', sendMessage);
Â  Â  userInput.addEventListener('keydown', (event) => {
Â  Â  Â  Â  if (event.key === 'Enter') {
Â  Â  Â  Â  Â  Â  sendMessage();
Â  Â  Â  Â  }
Â  Â  });

Â  Â  window.onload = function() {
Â  Â  Â  Â  console.log('Agen Adam siap melayani!');
Â  Â  };
Â  Â  </script>
</body>
</html>